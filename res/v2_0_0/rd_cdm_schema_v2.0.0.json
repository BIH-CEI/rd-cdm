{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Schema RD CDM Data Model",
    "version": "2.0.0",
    "description": "The ontology-based Rare Disease Common Data Model (RD CDM) to enable international registry use, HL7 FHIR, and GA4GH Phenopackets. This version defines the structure of RD CDM v2.0.0.",
    "type": "object",
    "properties": {
      "version": {
        "type": "string",
        "description": "The version of the data model"
      },
      "metadata": {
        "type": "object",
        "description": "Metadata about the data model, such as author, creation date, and code systems used",
        "properties": {
          "author": {
            "type": "string",
            "description": "Name of the author of the data model"
          },
          "creationDate": {
            "type": "string",
            "format": "date",
            "description": "Date the model was created"
          },
          "codeSystems": {
            "type": "array",
            "description": "A list of code systems used in the data model",
            "items": {
              "type": "object",
              "properties": {
                "codeSystemName": {
                  "type": "string",
                  "description": "The name of the code system (e.g., SNOMED CT, LOINC)"
                },
                "version": {
                  "type": "string",
                  "description": "The version of the code system being used"
                },
                "url": {
                  "type": "string",
                  "description": "The URL or reference to the code system source"
                },
                "namespace_prefix": {
                  "type": "string",
                  "description": "The short prefix for the code system"
                },
                "synonyms": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Optional list of synonyms for the code system"
                }
              },
              "required": ["codeSystemName", "version", "url", "namespace_prefix"]
            }
          }
        },
        "required": ["author", "creationDate", "codeSystems"]
      },
      "dataElements": {
        "type": "array",
        "description": "A list of data elements in the model",
        "items": {
          "type": "object",
          "properties": {
            "ordinal": {
              "type": "string",
              "description": "The ordinal value to define the hierarchical position of the data element. Can be of the form 1.1, 1.1.1, or 1.1a."
            },
            "section": {
              "type": "string",
              "description": "The section of the data element"
            },
            "elementName": {
              "type": "string",
              "description": "The name of the data element"
            },
            "elementCode": {
              "type": "string",
              "description": "The code associated with the data element"
            },
            "elementCodeSystem": {
              "type": "string",
              "description": "The code system used for the data element (e.g., SNOMED CT, LOINC)"
            },
            "dataType": {
              "type": "string",
              "description": "The data type of the element (e.g., string, integer, boolean)"
            },
            "dataSpecification": {
              "type": "array",
              "description": "One or more data specifications (e.g., format) for the data element",
              "items": {
                "type": "string"
              }
            },
            "valueSet": {
              "type": ["null", "object"],  // Allow valueSet to be null if not used
              "description": "Optional value set for this data element",
              "properties": {
                "valueSetName": {
                  "type": "string",
                  "description": "The name of the value set"
                },
                "valueSetOrigin": {
                  "type": "string",
                  "description": "The origin or source of the value set (e.g., created internally, HL7, etc.)"
                },
                "valueSetLink": {
                  "type": "string",
                  "description": "A URL linking to the source of the value set, if applicable"
                },
                "display": {
                  "type": "string",
                  "description": "Display name for the value set"
                },
                "valueSetCode": {
                  "type": "string",
                  "description": "Code for the value set"
                },
                "valueSetCodeSystem": {
                  "type": "string",
                  "description": "Code system associated with the value set (e.g., SNOMED CT, LOINC)"
                },
                "valueSetChoices": {
                  "type": "array",
                  "description": "A list of possible choices within this value set",
                  "items": {
                    "type": "object",
                    "properties": {
                      "choiceDisplay": {
                        "type": "string",
                        "description": "Display name for the value set choice"
                      },
                      "choiceCode": {
                        "type": "string",
                        "description": "Code for the value set choice"
                      },
                      "choiceCodeSystem": {
                        "type": "string",
                        "description": "Code system associated with the value set choice"
                      }
                    },
                    "required": ["choiceDisplay", "choiceCode", "choiceCodeSystem"]
                  }
                }
              },
              "required": ["valueSetName", "display", "valueSetCode", "valueSetCodeSystem", "valueSetChoices"]
            },
            "fhirExpression_v4.0.1": {
              "type": "string",
              "description": "FHIR v4.0.1 expression for this data element"
            },
            "recommendedVS_fhir": {
              "type": ["null", "string"],
              "description": "Recommended value set for FHIR v4.0.1 expression, if applicable"
            },
            "phenopacketSchemaElement_v2.0": {
              "type": "string",
              "description": "GA4GH Phenopacket Schema v2.0 element for this data element"
            },
            "recommendedVS_phenopacket": {
              "type": ["null", "string"],
              "description": "Recommended value set for Phenopacket Schema v2.0 expression, if applicable"
            },
            "description": {
              "type": "string",
              "description": "Detailed description of the data element"
            }
          },
          "required": ["ordinal", "elementName", "elementCode", "elementCodeSystem", "dataType"]
        }
      }
    },
    "required": ["version", "dataElements"]
  }
  